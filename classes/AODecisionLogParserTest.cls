@IsTest
private class AODecisionLogParserTest {

    @IsTest
    private static void parseHappyPath() {
        String testData = '{"applicant":{"person":{"tax_id":"599-99-1112","first_name":"Aaron","last_name":"Hansen","birth_date":"1982-01-03","home_phone":{"country_code":null,"phone_number":"3081231234","extension":null},"mobile_phone":{"country_code":null,"phone_number":null,"extension":null},"work_phone":{"country_code":null,"phone_number":null,"extension":null},"email":"test@iccu.com","identification":{"type":"drivers_license","id_number":"DB195346C","issuing_authority":"ID","issue_date":"1988-07-06","expire_date":"1988-07-06"},"primary_address":{"line_1":"123 Main Street","line_2":"","city":"Twin Falls","state":"ID","postal_code":"83301","country":"USA","is_preferred":true},"user_fields":[]},"persona":"unknown","membership_eligibility":"","system_info":[{"system_name":"SFDC","everything":"","status":"success","decision":"APPROVE","tracking_number":"XHCVWHN","system_display_name":"SFDC-Contact Check"},{"system_name":"CreateApp","everything":"s:Envelope xmlns:s=\\"http://schemas.xmlsoap.org/soap/envelope/\\"&gt;&lt;s:Body xmlns:xsi=\\"http://www.w3.org/2001/XMLSchema-instance\\" xmlns:xsd=\\"http://www.w3.org/2001/XMLSchema\\"&gt;&lt;SubmitExResponse xmlns=\\"http://tempuri.org/\\"&gt;&lt;SubmitExResult&gt;&lt;routing xmlns=\\"BizTalkMessage\\"&gt;&lt;org orgID=\\"4\\" orgCode=\\"ICCU\\"/&gt;&lt;action transactionType=\\"API\\"/&gt;&lt;user userName=\\"ICCUImportUser\\"/&gt;&lt;interface interfaceID=\\"600001\\"/&gt;&lt;system/&gt;&lt;approResult&gt;&lt;result&gt;Success&lt;/result&gt;&lt;/approResult&gt;&lt;/routing&gt;&lt;body xmlns=\\"BizTalkMessage\\"&gt;&lt;actionAPI version=\\"1\\" xmlns=\\"\\"&gt;&lt;createApp&gt;&lt;msg:appImportResponse msg:approVersion=\\"4.1\\" xmlns:msg=\\"Messages\\" xmlns:app=\\"App\\" xmlns:maint=\\"Maint\\" xmlns:util=\\"Util\\" xmlns:common=\\"Common\\"&gt;&lt;msg:approResult&gt;&lt;common:result&gt;Success&lt;/common:result&gt;&lt;/msg:approResult&gt;&lt;msg:appIDs&gt;&lt;msg:appID&gt;30007340&lt;/msg:appID&gt;&lt;/msg:appIDs&gt;&lt;msg:applications&gt;&lt;app:files/&gt;&lt;app:application app:applicationID=\\"30007340\\" app:appNum=\\"30007340\\" app:appReceivedDate=\\"2018-08-15T15:05:29.176\\" app:appInitiatedDate=\\"2018-08-15T15:05:29.176\\" app:priorityCD=\\"High\\" app:deliveryMethodCD=\\"Internet\\" app:applicantStructureTypeCD=\\"Individual\\" app:referenceNumber=\\"AVOKA-DEV-886ba90e-2d52-42c6-974e-f3b5513517e2\\"&gt;&lt;app:appParties&gt;&lt;app:primaryBorrower common:idRef=\\"bd841526-48fb-43f3-9132-7b67e3b65b29\\" common:partyType=\\"Individual\\"&gt;&lt;app:appPartyResources&gt;&lt;app:appPartyResource app:resourceID=\\"98\\"/&gt;&lt;/app:appPartyResources&gt;&lt;/app:primaryBorrower&gt;&lt;app:sourceChannel common:idRef=\\"b8c9d648-3fb7-48f6-988e-ce6b5332f448\\" common:partyType=\\"Channel\\" app:appPartyType=\\"SourceChannel\\"/&gt;&lt;app:servicingChannel common:idRef=\\"5f798809-1215-40a7-bed6-52fc700c4bfc\\" common:partyType=\\"Channel\\" app:appPartyType=\\"ServicingChannel\\"/&gt;&lt;/app:appParties&gt;&lt;app:parties&gt;&lt;common:employer common:id=\\"cfe014ba-8b3d-4609-a767-7ff380eebcfd\\" common:partyID=\\"1007112\\" common:languageID=\\"English\\" common:beginDate=\\"2018-08-15T21:05:31.613\\" common:name=\\"Centurylink\\"&gt;&lt;common:contactMechanisms&gt;&lt;common:contactMechanism common:contactMechanismID=\\"3148826\\" common:contactMechanismType=\\"WorkPhone\\" common:contactString=\\"2087659987\\" common:isPreferredContactMechanismFL=\\"false\\"&gt;&lt;common:contactMechanismCategory common:isNew=\\"false\\" common:CD=\\"1\\"/&gt;&lt;/common:contactMechanism&gt;&lt;/common:contactMechanisms&gt;&lt;/common:employer&gt;&lt;common:channel common:id=\\"5f798809-1215-40a7-bed6-52fc700c4bfc\\" common:isNew=\\"false\\" common:partyID=\\"12009\\"/&gt;&lt;common:user common:id=\\"801f914d-b637-41b3-af83-d9be2f8bb793\\" common:isNew=\\"false\\" common:partyID=\\"990547\\" common:beginDate=\\"2018-05-08T14:40:31.73\\" common:timeZoneCode=\\"MST\\"&gt;&lt;common:partyTypes&gt;&lt;common:partyType&gt;User&lt;/common:partyType&gt;&lt;common:partyType&gt;LoanOfficer&lt;/common:partyType&gt;&lt;/common:partyTypes&gt;&lt;/common:user&gt;&lt;common:channel common:id=\\"b8c9d648-3fb7-48f6-988e-ce6b5332f448\\" common:isNew=\\"false\\" common:partyID=\\"12009\\"/&gt;&lt;common:organization common:id=\\"6b1fc6f4-5385-4669-8e8f-19041cc91924\\" common:isNew=\\"false\\" common:partyID=\\"4\\" common:name=\\"Idaho Central CU\\" common:description=\\"LoanCenter\\"&gt;&lt;common:partyRelationships&gt;&lt;common:partyRelationship common:relationshipType=\\"OrganizationToCustomerDataOwnership\\"&gt;&lt;common:partyRef common:isNew=\\"false\\" common:idRef=\\"bd841526-48fb-43f3-9132-7b67e3b65b29\\" common:partyType=\\"Individual\\"/&gt;&lt;/common:partyRelationship&gt;&lt;/common:partyRelationships&gt;&lt;/common:organization&gt;&lt;common:group common:id=\\"acd871aa-21f5-4e6c-a4ec-054a6deeb2b8\\" common:isNew=\\"false\\" common:partyID=\\"11878\\"&gt;&lt;common:partyTypes&gt;&lt;common:partyType&gt;Team&lt;/common:partyType&gt;&lt;/common:partyTypes&gt;&lt;/common:group&gt;&lt;common:individual common:id=\\"bd841526-48fb-43f3-9132-7b67e3b65b29\\" common:partyID=\\"1007111\\" common:languageID=\\"English\\" common:beginDate=\\"2018-08-15T21:05:31.597\\" common:ssn=\\"599991112\\" common:firstName=\\"Aaron\\" common:lastName=\\"Hansen\\" common:dob=\\"1982-01-03\\" common:age=\\"36\\" common:mothersMaidenName=\\"null\\" common:isPermanentResidentFL=\\"false\\" common:hasAlienRegNumFL=\\"false\\" common:numOfDependants=\\"0\\" common:isExistingCustomerFL=\\"false\\"&gt;&lt;common:contactMechanisms&gt;&lt;common:contactMechanism common:contactMechanismID=\\"3148820\\" common:contactMechanismType=\\"CurrentAddress\\" common:isPreferredContactMechanismFL=\\"false\\"&gt;&lt;common:addressRef common:isNew=\\"false\\" common:idRef=\\"7cda0b9e-71d0-4dae-9883-45b580ff31c4\\"/&gt;&lt;common:contactMechanismCategory common:isNew=\\"false\\" common:CD=\\"2\\"/&gt;&lt;/common:contactMechanism&gt;&lt;common:contactMechanism common:contactMechanismID=\\"3148821\\" common:contactMechanismType=\\"MailingAddress\\" common:isPreferredContactMechanismFL=\\"false\\"&gt;&lt;common:addressRef common:isNew=\\"false\\" common:idRef=\\"7cda0b9e-71d0-4dae-9883-45b580ff31c4\\"/&gt;&lt;common:contactMechanismCategory common:isNew=\\"false\\" common:CD=\\"2\\"/&gt;&lt;/common:contactMechanism&gt;&lt;common:contactMechanism common:contactMechanismID=\\"3148822\\" common:contactMechanismType=\\"HomePhone\\" common:contactString=\\"2084661111\\" common:isPreferredContactMechanismFL=\\"false\\"&gt;&lt;common:contactMechanismCategory common:isNew=\\"false\\" common:CD=\\"1\\"/&gt;&lt;/common:contactMechanism&gt;&lt;common:contactMechanism common:contactMechanismID=\\"3148823\\" common:contactMechanismType=\\"WorkPhone\\" common:contactString=\\"2089493333\\" common:isPreferredContactMechanismFL=\\"false\\"&gt;&lt;common:contactMechanismCategory common:isNew=\\"false\\" common:CD=\\"1\\"/&gt;&lt;/common:contactMechanism&gt;&lt;common:contactMechanism common:contactMechanismID=\\"3148824\\" common:contactMechanismType=\\"CellPhone\\" common:contactString=\\"2084662222\\" common:isPreferredContactMechanismFL=\\"false\\"&gt;&lt;common:contactMechanismCategory common:isNew=\\"false\\" common:CD=\\"1\\"/&gt;&lt;/common:contactMechanism&gt;&lt;common:contactMechanism common:contactMechanismID=\\"3148825\\" common:contactMechanismType=\\"EMail\\" common:contactString=\\"avokatest123@gmail.com\\" common:isPreferredContactMechanismFL=\\"false\\"&gt;&lt;common:contactMechanismCategory common:isNew=\\"false\\"/&gt;&lt;/common:contactMechanism&gt;&lt;/common:contactMechanisms&gt;&lt;common:partyRelationships&gt;&lt;common:employment common:relationshipType=\\"Employment\\"&gt;&lt;common:partyRef common:isNew=\\"true\\" common:idRef=\\"cfe014ba-8b3d-4609-a767-7ff380eebcfd\\" common:partyType=\\"Employer\\"/&gt;&lt;common:employmentSubRel common:isNew=\\"false\\" common:isCurrentFL=\\"true\\" common:title=\\"testing\\" common:monthsEmployed=\\"209\\" common:employmentType=\\"FullTime\\"&gt;&lt;common:userEmploymentType common:isNew=\\"false\\" common:CD=\\"2\\"/&gt;&lt;/common:employmentSubRel&gt;&lt;/common:employment&gt;&lt;/common:partyRelationships&gt;&lt;common:partyIdentifications&gt;&lt;common:partyIdentification common:IDNum=\\"DB195346C\\" common:dateOfIssuance=\\"1988-07-06T00:00:00-05:00\\" common:issuanceEntity=\\"ID\\" common:expirationDate=\\"1988-07-06T00:00:00-05:00\\" common:partyIdentificationID=\\"11471\\"&gt;&lt;common:identificationCD common:isNew=\\"false\\" common:lookupType=\\"IdentificationType\\" common:CD=\\"D\\" common:name=\\"Salesforce Drivers License\\" common:isActive=\\"true\\"/&gt;&lt;/common:partyIdentification&gt;&lt;/common:partyIdentifications&gt;&lt;common:incomes&gt;&lt;common:income common:incomeID=\\"18732\\" common:IncomeTypeCD=\\"Salary\\" common:frequency=\\"Annually\\" common:amountPerPeriod=\\"75000\\" common:hoursPerWeek=\\"40\\" common:incomeStatus=\\"IncomeStatus_Included\\" common:incomeAdjustmentPercentage=\\"1\\"&gt;&lt;common:employerRef common:isNew=\\"true\\" common:idRef=\\"cfe014ba-8b3d-4609-a767-7ff380eebcfd\\"/&gt;&lt;/common:income&gt;&lt;/common:incomes&gt;&lt;common:trades&gt;&lt;common:trade common:tradeID=\\"127572\\" common:accountTypeCD=\\"RealEstateMortgage\\" common:tradeTypeID=\\"Mortgage\\" common:creditorName=\\"\\" common:debtStatusCD=\\"Include\\" common:ecoaCD=\\"Individual\\" common:monthlyPayment=\\"1100\\" common:isCurrResidenceRentMortgage=\\"true\\" common:isSecured=\\"true\\"&gt;&lt;common:kindOfBusiness common:isNew=\\"false\\" common:lookupType=\\"KOB\\" common:CD=\\"FM\\"/&gt;&lt;/common:trade&gt;&lt;/common:trades&gt;&lt;/common:individual&gt;&lt;/app:parties&gt;&lt;app:appDetails&gt;&lt;app:appDetailBankcard app:appDetailID=\\"11233\\" app:appDetailSavePoint=\\"Current\\" app:contractDate=\\"2018-08-15T21:05:31.6233309\\" app:contractRate=\\"0.000\\" app:financedAmt=\\"500\\" app:equityPercentage=\\"0\\" app:termInMonths=\\"0\\" app:margin=\\"0.0949\\" app:daysPerYear=\\"360\\" app:loanType=\\"Consumer\\" app:interestRateType=\\"Variable\\" app:rankNum=\\"1\\" app:maxRateAdjInc=\\"0.050\\" app:maxRateAdjDec=\\"0.020\\" app:maxContractRate=\\"0.1799\\" app:minContractRate=\\"0.1099\\" app:lifetimeInterestRateMinimum=\\"0.1099\\" app:baseRate=\\"0.04500000\\" app:requestType=\\"New\\" app:insuranceOptionID=\\"1\\" app:paymentCalculationType=\\"PctOfAmountRequested\\" app:requestedAmountPaymentPct=\\"0.020\\"&gt;&lt;app:appDetailParties&gt;&lt;app:appDetailParty common:idRef=\\"b8c9d648-3fb7-48f6-988e-ce6b5332f448\\" common:partyType=\\"Channel\\" app:appPartyType=\\"SourceChannel\\"/&gt;&lt;app:appDetailParty common:idRef=\\"5f798809-1215-40a7-bed6-52fc700c4bfc\\" common:partyType=\\"Channel\\" app:appPartyType=\\"ServicingChannel\\"/&gt;&lt;app:appDetailParty common:idRef=\\"801f914d-b637-41b3-af83-d9be2f8bb793\\" common:partyType=\\"User\\" app:appPartyType=\\"LoanOfficer\\"/&gt;&lt;app:appDetailParty common:idRef=\\"acd871aa-21f5-4e6c-a4ec-054a6deeb2b8\\" app:appPartyType=\\"QueuedFromUser\\"/&gt;&lt;/app:appDetailParties&gt;&lt;app:appDetailRequestedAmts&gt;&lt;app:appDetailRequestedAmt app:appDetailRequestedAmtID=\\"81109\\" app:requestedAmount=\\"500\\" app:requestedAmountType=\\"Generic\\"/&gt;&lt;/app:appDetailRequestedAmts&gt;&lt;app:appDetailStatuses&gt;&lt;app:appDetailStatus app:appDetailStatusID=\\"31177\\" app:statusType=\\"WorkflowStatus\\" app:status=\\"WorkflowStatus_DataAcquisition\\"/&gt;&lt;/app:appDetailStatuses&gt;&lt;app:product common:isNew=\\"false\\" common:productID=\\"134\\" common:beginDate=\\"2016-05-16T00:00:00\\" common:shortName=\\"Premier Rewards Visa\\" common:name=\\"Premier Rewards Visa\\" common:isActiveFL=\\"true\\" common:productTypeID=\\"CreditCard\\" common:loanType=\\"Consumer\\" common:liquidCreditProductCategoryCD=\\"2000\\" common:orgID=\\"4\\"&gt;&lt;common:organizationRef common:isNew=\\"false\\" common:idRef=\\"54df1988-96bf-4c8e-9b87-5d0304947932\\"/&gt;&lt;common:productCategory common:isNew=\\"false\\" common:productCategoryID=\\"25\\" common:name=\\"Credit Card Products\\" common:description=\\"Credit Card Products\\" common:isActiveFL=\\"true\\"&gt;&lt;common:organizationRef common:isNew=\\"false\\" common:idRef=\\"54df1988-96bf-4c8e-9b87-5d0304947932\\"/&gt;&lt;/common:productCategory&gt;&lt;common:initialTeamRef common:isNew=\\"false\\" common:idRef=\\"730a1a9a-a86d-49f9-ad02-503b1ad53c05\\"/&gt;&lt;common:productFormPackage common:isNew=\\"false\\" common:CD=\\"1\\" common:name=\\"Credit Card\\" common:formPackageTypeID=\\"1\\"/&gt;&lt;/app:product&gt;&lt;app:appDetailStipulations&gt;&lt;app:appDetailStipulation app:appDetailStipulationID=\\"73557\\" app:status=\\"Open\\" app:name=\\"Duplicate Fraud Alerts:  Select satisfied if a trigger happened and it was addressed in notes.  Select waived if an alert did not trigger.\\"&gt;&lt;app:stipulation common:isNew=\\"false\\" common:stipulationID=\\"16\\" common:name=\\"Duplicate Fraud Alerts:  Select satisfied if a trigger happened and it was addressed in notes.  Select waived if an alert did not trigger.\\" common:sortOrder=\\"0\\"/&gt;&lt;app:stipulationSource common:isNew=\\"false\\" common:CD=\\"2\\"/&gt;&lt;/app:appDetailStipulation&gt;&lt;app:appDetailStipulation app:appDetailStipulationID=\\"73558\\" app:status=\\"Open\\" app:name=\\"Employment Income Verification:  Select satisfied if verification was obtained and/or documented or imaged.  Select waived if the loan meets guidelines to waive verification.\\"&gt;&lt;app:stipulation common:isNew=\\"false\\" common:stipulationID=\\"17\\" common:name=\\"Employment Income Verification:  Select satisfied if verification was obtained and/or documented or imaged.  Select waived if the loan meets guidelines to waive verification.\\" common:sortOrder=\\"1\\"/&gt;&lt;app:stipulationSource common:isNew=\\"false\\" common:CD=\\"2\\"/&gt;&lt;/app:appDetailStipulation&gt;&lt;app:appDetailStipulation app:appDetailStipulationID=\\"73559\\" app:status=\\"Open\\" app:name=\\"Loan Aggregates:  Select satisfied if the loan needs to go to Loan Committee for approval due to aggregates.  Select waived if the loan does not need to go to Loan Committee due to aggregates.\\"&gt;&lt;app:stipulation common:isNew=\\"false\\" common:stipulationID=\\"18\\" common:name=\\"Loan Aggregates:  Select satisfied if the loan needs to go to Loan Committee for approval due to aggregates.  Select waived if the loan does not need to go to Loan Committee due to aggregates.\\" common:sortOrder=\\"2\\"/&gt;&lt;app:stipulationSource common:isNew=\\"false\\" common:CD=\\"2\\"/&gt;&lt;/app:appDetailStipulation&gt;&lt;/app:appDetailStipulations&gt;&lt;app:riskProcessingLevel common:isNew=\\"false\\" common:lookupType=\\"RPL\\" common:CD=\\"1\\"/&gt;&lt;app:pricingPlan common:isNew=\\"false\\" common:planID=\\"19\\"/&gt;&lt;app:appDetailIndirect common:isNew=\\"false\\" app:payDealerNow=\\"false\\" app:payOriginationFeeNow=\\"false\\" app:calcOriginationFeeFL=\\"false\\" app:useCRBRRuleFL=\\"false\\" app:isOriginationFeeValuePct=\\"false\\" app:calcDiscountFL=\\"false\\" app:globalDiscountFL=\\"true\\" app:federalDisclosureFL=\\"false\\"/&gt;&lt;app:loanPurposes&gt;&lt;app:appDetailLoanPurpose app:rank=\\"1\\"&gt;&lt;app:loanPurpose common:isNew=\\"false\\" common:CD=\\"18\\"/&gt;&lt;/app:appDetailLoanPurpose&gt;&lt;/app:loanPurposes&gt;&lt;app:contractRateIndex common:isNew=\\"true\\" common:rateIndexID=\\"2\\"/&gt;&lt;app:appDetailProcessQuestionResponses&gt;&lt;app:appDetailQuestionResponse app:appDetailQuestionResponseID=\\"32931\\" app:processID=\\"51\\" app:ordernum=\\"2\\"&gt;&lt;app:question common:isNew=\\"false\\" common:questionID=\\"86\\"/&gt;&lt;app:lookupResponse common:isNew=\\"false\\" common:CD=\\"2\\"/&gt;&lt;/app:appDetailQuestionResponse&gt;&lt;/app:appDetailProcessQuestionResponses&gt;&lt;/app:appDetailBankcard&gt;&lt;/app:appDetails&gt;&lt;app:properties/&gt;&lt;app:addresses&gt;&lt;common:address common:id=\\"7cda0b9e-71d0-4dae-9883-45b580ff31c4\\" common:addressID=\\"1489554\\" common:street1=\\"15122 Wagner Road\\" common:street2=\\"\\" common:postalCode=\\"83221\\" common:cityName=\\"Blackfoot\\" common:monthsResided=\\"220\\" common:state=\\"ID\\" common:country=\\"UnitedStates\\"&gt;&lt;common:residenceType common:isNew=\\"false\\" common:CD=\\"N\\"/&gt;&lt;/common:address&gt;&lt;/app:addresses&gt;&lt;app:scores/&gt;&lt;app:org common:isNew=\\"false\\" common:idRef=\\"6b1fc6f4-5385-4669-8e8f-19041cc91924\\"/&gt;&lt;app:appServiceRequests/&gt;&lt;app:vehicleValuations/&gt;&lt;app:deliverySource common:isNew=\\"false\\" common:CD=\\"600001\\"/&gt;&lt;app:serviceRequestGroups/&gt;&lt;/app:application&gt;&lt;/msg:applications&gt;&lt;/msg:appImportResponse&gt;&lt;/createApp&gt;&lt;/actionAPI&gt;&lt;/body&gt;&lt;/SubmitExResult&gt;&lt;/SubmitExResponse&gt;&lt;/s:Body&gt;&lt;/s:Envelope&gt;","status":"success","decision":"APPROVE","tracking_number":"ZXK7TTF","system_display_name":"CRIF - CreateApp"},{"system_name":"CrifDecisioning","everything":"","status":"success","decision":"APPROVE","tracking_number":"ZXK7TTF","system_display_name":"CRIF - Decisioning"}]},"co_applicants":[{"person":{"tax_id":"599-99-7782","first_name":"Jane","last_name":"Hansen","birth_date":"1982-10-03","home_phone":{"country_code":null,"phone_number":"3081231234","extension":null},"mobile_phone":{"country_code":null,"phone_number":null,"extension":null},"work_phone":{"country_code":null,"phone_number":null,"extension":null},"email":"jane@abcdefg123.com","identification":{"type":"drivers_license","id_number":"DB999346C","issuing_authority":"ID","issue_date":"2018-01-01","expire_date":"2028-01-01"},"primary_address":{"line_1":"123 Main Street","line_2":"","city":"Twin Falls","state":"ID","postal_code":"83301","country":"USA","is_preferred":true},"user_fields":[]},"persona":"person","membership_eligibility":"","system_info":[{"system_name":"SFDC","everything":"","status":"success","decision":"APPROVE","tracking_number":"XHCVWHN","system_display_name":"SFDC-Contact Check"}]}],"products":[{"product_name":"Premier Rewards Visa","major_type":"CRIF","minor_type":"134"}],"promotions":[],"funding_info":{},"reports":[],"app_status":"complete","version":"3","form":{"name":"accountsandfunding","tracking_code":"ZXK7TTF","job_reference_code":"ZXK7TTF","url":"https://test.iccu.avoka-transact.com/apps/secure/form.htm?submitKey=7d0d72a41dfe8aba616181774f1539a1"},"application_id":""}';
        AOApplicationRestRequest request = AOApplicationRestRequest.parse(testData);
        AOApplicationInfo appInfo = new AOApplicationInfo(request);

        Test.startTest();

        try {
            AODecisionLogParser parser = new AODecisionLogParser();
            parser.parsePayload(appInfo);

        } catch(Exception e) {
            System.assert(false, 'Threw an exception: ' + e + ' - ' + e.getStackTraceString());
        }

        Test.stopTest();

        // Ensure that the system interactions were parsed properly.
        System.assertEquals(0, appInfo.errors.size());
        System.assertNotEquals(null, appInfo.systemInteractionResults);
        System.assertNotEquals(0, appInfo.systemInteractionResults.keySet().size());

        // Ensure that the applicant/co-applicant interactions were both parsed.
        Boolean containsApplicant = false;
        Boolean containsCoapplicant = false;
        for (String key : appInfo.systemInteractionResults.keySet()) {
            if (key.contains('Applicant')) {
                containsApplicant = true;
            }
            if (key.contains('Co-Applicant')) {
                containsCoapplicant = true;
            }
        }
        System.assert(containsApplicant);
        System.assert(containsCoapplicant);
    }

    @IsTest
    private static void testEmptySystemInfo() {
        String testData = '{"form":{"name":"accountsandfunding","tracking_code":"4MJJFP3","job_reference_code":"XZFCGH3"},"applicant":{"person":{"first_name":"Paul","last_name":"Ferguson","birth_date":"1958-01-01","tax_id":"666-37-1340","primary_address":{"line_1":"4400 Central Way","line_2":"Ste 510","city":"Chubbuck","state":"ID","country":"USA","postal_code":"83202"},"identification":{"type":"drivers_license","id_number":"101800775","issuing_authority":"CO","issue_date":"2018-01-01","expire_date":"2028-01-01"},"credit_score":{"score":null,"score_date":null},"home_phone":{"country_code":null,"phone_number":"3081231234","extension":null},"mobile_phone":{"country_code":null,"phone_number":null,"extension":null},"work_phone":{"country_code":null,"phone_number":null,"extension":null},"email":"dmagill@iccu.com"},"persona":"Unknown","membership_eligibility":"","system_info":[]},"coApplicants":[],"products":[],"fundingInfo":{},"reports":[],"app_status":"Completed","version":"3","external_crm_id":null}';
        AOApplicationRestRequest request = AOApplicationRestRequest.parse(testData);
        AOApplicationInfo appInfo = new AOApplicationInfo(request);

        Test.startTest();

        try {
            AODecisionLogParser parser = new AODecisionLogParser();
            parser.parsePayload(appInfo);

        } catch(Exception e) {
            System.assert(false, 'Threw an exception: ' + e + ' - ' + e.getStackTraceString());
        }

        Test.stopTest();

        // Ensure that there is code coverage on all of the NOT_PRESENT logic.
        System.assertEquals(0, appInfo.errors.size());
        System.assertNotEquals(null, appInfo.systemInteractionResults);
        System.assertEquals(0, appInfo.systemInteractionResults.keySet().size());
    }

}